(function(e){e.fn.luckyplayer=function(t){function c(e){s.hide();if(t.player){o.attr("src",a[e+1].href)}s.attr("src",a[e].href)}function h(){clearTimeout(t.tb);r.slideDown(500);t.tb=setTimeout(function(){r.slideUp(500)},3e3)}function p(){var e=s.width()/2;var t=s.height()/2;s.css({marginLeft:"-"+e+"px",marginTop:"-"+t+"px"})}function d(){if(f==l){if(t.loop){f=0}else{return false}}else{f++}c(f);return false}function v(){if(f==l){if(t.loop){f=l}else{return false}}else{f--}c(f);return false}t=e.extend({auto:6e3,loop:true,images:"/assets/images/luckyplayer/"},t||{});e("body").append('<div id="lp_frame">'+'<img id="lp_image">'+'<img id="lp_spinner" src="'+t.images+'loader.gif">'+"</div>"+'<div id="lp_toolbar">'+'<div id="lp_play"></div>'+'<div id="lp_prev"></div>'+'<div id="lp_next"></div>'+'<div id="lp_close"></div>'+"</div>"+'<div id="lp_shadow"></div>'+'<img id="lp_preload">');var n=e("#lp_shadow").css({overflow:"hidden",position:"fixed",zIndex:1101,left:0,top:0,display:"none",width:"100%",height:"100%",opacity:.95,backgroundColor:"black"});var r=e("#lp_toolbar").css({position:"fixed",zIndex:1102,top:"100%",left:0,width:"100%",height:"35px",marginTop:"-35px",backgroundColor:"black",opacity:.9,color:"white",display:"none"});var i=e("#lp_frame").css({position:"fixed",display:"none",zIndex:1102,top:0,left:0,width:"100%",height:"100%"});var s=e("#lp_image").css({position:"absolute",left:"50%",top:"50%",display:"none",maxWidth:"100%",maxHeight:"100%",zIndex:1104});e("#lp_spinner").css({position:"absolute",left:"50%",top:"50%",marginLeft:"-25px",marginTop:"-25px",zIndex:1103});var o=e("#lp_preload").css({display:"none"});r.find("div").css({width:"25%",height:"100%","float":"left",backgroundRepeat:"no-repeat",backgroundPosition:"center"});var u=r.find("#lp_play").css("backgroundImage","url("+t.images+"play.png)");r.find("#lp_next").css("backgroundImage","url("+t.images+"next.png)");r.find("#lp_prev").css("backgroundImage","url("+t.images+"prev.png)");r.find("#lp_close").css("backgroundImage","url("+t.images+"close.png)");var a=e(this).find("li > a"),f=0,l=a.size()-1;t.player=false;t.tb=false;a.each(function(t){e(this).attr("data-index",t)});a.click(function(){var s=e(this);n.show();i.show();r.slideDown(500);f=s.attr("data-index");c(f);t.tb=setTimeout(function(){r.slideUp(500)},3e3);return false});s.click(function(){h()});i.click(function(){h()});r.hover(function(){clearTimeout(t.tb)},function(){t.tb=setTimeout(function(){r.slideUp(500)},3e3)});s.on("load",function(){p();s.fadeIn(500)});e(window).resize(function(){p()});e("#lp_next").click(function(){d()});e("#lp_prev").click(function(){v()});e("#lp_play").click(function(){if(t.player){u.css("backgroundImage","url("+t.images+"play.png)");clearInterval(t.player);t.player=false}else{u.css("backgroundImage","url("+t.images+"pause.png)");t.player=setInterval(function(){d()},t.auto)}});e("#lp_close").click(function(){clearTimeout(t.tb);clearTimeout(t.player);t.player=false;u.css("backgroundImage","url("+t.images+"play.png)");r.hide();i.hide();n.hide();s.attr("src","");return false})}})(jQuery)